<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SuperDoge (SUPDOG) Stats</title>
<style>
  body { font-family: Arial, sans-serif; background:#121212; color:#eee; padding:20px; max-width: 600px; margin: auto; }
  h1 { text-align: center; }
  p { font-size: 1.2em; margin: 10px 0; }
  .loading { color: #777; }
</style>
</head>
<body>

<h1>SuperDoge (SUPDOG) Token Stats</h1>

<p>Charity Donations: <span id="charity-donations" class="loading">Loading...</span></p>
<p>Burned Tokens: <span id="burned-tokens" class="loading">Loading...</span></p>
<p>Circulating Supply: <span id="circulating-supply" class="loading">Loading...</span></p>
<p>Market Cap: <span id="market-cap" class="loading">Loading...</span></p>
<p>Holders: <span id="holders" class="loading">Loading...</span></p>
<p>Total Transactions: <span id="txcount" class="loading">Loading...</span></p>

<script>
(async () => {
  const apiKey = 'YOUR_BSCSCAN_API_KEY'; // <-- Replace with your BscScan API key
  const tokenAddress = '0x622A1297057ea233287ce77bdBF2AB4E63609F23';

  const charityWallets = [
    '0x2A8500831745891D2aC01403Da08883be4D58b72',
    '0x7Dd4eAE167bc55F9EA5df729936Dcc69af0B54B5',
    '0xdDE25A762653baf7D53725010ab3901E6E527523'
  ];

  const burnAddress = '0x000000000000000000000000000000000000dEaD';

  async function fetchJSON(url) {
    const res = await fetch(url);
    if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);
    return await res.json();
  }

  async function getBNBBalance(address) {
    const url = `https://api.bscscan.com/api?module=account&action=balance&address=${address}&tag=latest&apikey=${apiKey}`;
    const data = await fetchJSON(url);
    if (data.status !== '1') throw new Error('Error fetching BNB balance');
    return parseFloat(data.result) / 1e18;
  }

  async function getTokenBalance(address) {
    const url = `https://api.bscscan.com/api?module=account&action=tokenbalance&contractaddress=${tokenAddress}&address=${address}&tag=latest&apikey=${apiKey}`;
    const data = await fetchJSON(url);
    if (data.status !== '1') throw new Error('Error fetching token balance');
    return parseFloat(data.result) / 1e18;
  }

  async function getTokenSupply() {
    const url = `https://api.bscscan.com/api?module=stats&action=tokensupply&contractaddress=${tokenAddress}&apikey=${apiKey}`;
    const data = await fetchJSON(url);
    if (data.status !== '1') throw new Error('Error fetching token supply');
    return parseFloat(data.result) / 1e18;
  }

  async function getBNBPrice() {
    const url = `https://api.bscscan.com/api?module=stats&action=bnbprice&apikey=${apiKey}`;
    const data = await fetchJSON(url);
    if (data.status !== '1') throw new Error('Error fetching BNB price');
    return parseFloat(data.result.ethusd);
  }

  async function getTokenPriceUSD() {
    const url = `https://api.dexscreener.com/latest/dex/tokens/${tokenAddress}`;
    const data = await fetchJSON(url);
    if (!data.pairs || data.pairs.length === 0) return 0;
    return parseFloat(data.pairs[0].priceUsd);
  }

  async function getHolderCount() {
    const url = `https://api.bscscan.com/api?module=token&action=getTokenHolderCount&contractaddress=${tokenAddress}&apikey=${apiKey}`;
    const data = await fetchJSON(url);
    if (data.status !== '1') return 'N/A';
    return data.result;
  }

  async function getTransactionCount() {
    const url = `https://api.bscscan.com/api?module=account&action=txlist&address=${tokenAddress}&startblock=0&endblock=99999999&sort=desc&apikey=${apiKey}`;
    const data = await fetchJSON(url);
    if (data.status !== '1') return 'N/A';
    return data.result.length;
  }

  try {
    // Charity BNB donations total
    const charityBNBs = await Promise.all(charityWallets.map(getBNBBalance));
    const totalCharityBNB = charityBNBs.reduce((a, b) => a + b, 0);

    // Burned tokens
    const burnedTokens = await getTokenBalance(burnAddress);

    // Total supply
    const totalSupply = await getTokenSupply();

    // Circulating supply
    const circulatingSupply = totalSupply - burnedTokens;

    // BNB price
    const bnbPrice = await getBNBPrice();

    // Token price USD
    const tokenPrice = await getTokenPriceUSD();

    // Market Cap
    const marketCap = circulatingSupply * tokenPrice;

    // Holders count
    const holders = await getHolderCount();

    // Transactions count (might be large)
    const txCount = await getTransactionCount();

    // Update UI
    document.getElementById('charity-donations').innerText =
      `${totalCharityBNB.toFixed(3)} BNB ($${(totalCharityBNB * bnbPrice).toFixed(0)})`;

    document.getElementById('burned-tokens').innerText =
      `${burnedTokens.toLocaleString(undefined, {maximumFractionDigits: 0})} SUPDOG`;

    document.getElementById('circulating-supply').innerText =
      `${circulatingSupply.toLocaleString(undefined, {maximumFractionDigits: 0})} SUPDOG`;

    document.getElementById('market-cap').innerText =
      `$${marketCap.toLocaleString(undefined, {maximumFractionDigits: 0})}`;

    document.getElementById('holders').innerText = holders;

    document.getElementById('txcount').innerText = txCount;

  } catch (err) {
    console.error('Error loading token stats:', err);
    const els = ['charity-donations', 'burned-tokens', 'circulating-supply', 'market-cap', 'holders', 'txcount'];
    els.forEach(id => {
      document.getElementById(id).innerText = 'Error';
    });
  }
})();
</script>

</body>
</html>
